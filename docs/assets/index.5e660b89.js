import{g as L,i as A,s as x}from"./utils.d6b00222.js";import{l as F,f as c,e as v,G as z,C as S,o as _,m as f,t as h,M as D,u as m,q as $,B as k,p as l,H as N,J as b}from"./vendor.57be17a3.js";const w=["data-src"],I=l("div",{class:"x-image__placeholder"},"Loading...",-1),V=l("div",{class:"x-image__error"},"Failed",-1),q=["src"],H=F({props:{src:null,fit:{default:"cover"},aspect:null,lazy:{type:Boolean},scrollContainer:null},setup(n){const s=n,r=c(!0),o=c(!1),u=c(),a=c(),E=v(()=>({objectFit:s.fit})),p=v(()=>{var e;return(e=s.aspect)==null?void 0:e.split("/").every(t=>!Number.isNaN(Number(t)))}),B=v(()=>{if(!p.value)return{};const e=s.aspect.split("/");return{"--aspect-w":e[0],"--aspect-h":e[1]}}),i=()=>{const e=new Image,t=s.src;e.src=t,e.addEventListener("load",C=>{t==s.src&&(r.value=!1,o.value=!1)}),e.addEventListener("error",C=>{t==s.src&&(r.value=!1,o.value=!0)})},y=()=>{var e;(e=a.value)==null||e.removeEventListener("scroll",d),a.value=void 0},d=()=>{A(u.value,a.value)&&(i(),y())},g=()=>{var t;const{scrollContainer:e}=s;e instanceof Element?a.value=e:typeof e=="string"&&e!=""?a.value=(t=document.querySelector(e))!=null?t:void 0:u.value&&(a.value=L(u.value)),a.value&&(a.value.addEventListener("scroll",d),d())};return z(()=>s.src,()=>{r.value=!0,o.value=!1,s.lazy?(y(),g()):i()}),S(()=>{s.lazy?g():i()}),(e,t)=>(_(),f("div",{class:$(["x-image",{"x-image--aspect":m(p)}]),"data-src":n.src,style:k(m(B)),ref_key:"container",ref:u},[r.value?h(e.$slots,"placeholder",{key:0},()=>[I]):o.value?h(e.$slots,"error",{key:1},()=>[V]):(_(),f("img",D({key:2,class:"x-image__inner"},e.$attrs,{src:n.src,style:m(E)}),null,16,q))],14,w))}}),M=l("div",{class:"text-center py-5 text-2xl"},"\u6EDA\u52A8\u9875\u9762\u67E5\u770B\u56FE\u7247\u52A0\u8F7D",-1),T=l("div",{class:"h-[150vh]"},null,-1),j=l("div",{class:"h-screen"},null,-1),O=F({setup(n){return x("\u81EA\u5B9A\u4E49\u56FE\u7247\u7EC4\u4EF6\uFF0C\u663E\u793A\u52A0\u8F7D\u72B6\u6001\u548C error \u72B6\u6001\uFF0C\u652F\u6301\u56FA\u5B9A\u5BBD\u9AD8\u6BD4\uFF0C\u652F\u6301\u61D2\u52A0\u8F7D"),(s,r)=>(_(),f(b,null,[M,T,N(H,{class:"w-52 mx-auto",src:"http://qiniu.pxcoder.club/others/20220224091542BSOSTrbnVd",lazy:"",aspect:"4/3"},null,8,["src"]),j],64))}});export{O as default};
