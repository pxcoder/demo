import{g as T,s as z}from"./utils.d6b00222.js";import{l as y,f as o,e as v,G as I,C as R,o as w,m as b,p as c,t as k,B as h,u as g,H as _,I as m}from"./vendor.57be17a3.js";const x=y({props:{top:{default:0},zIndex:{default:10},target:null},emits:{scroll:({scrollTop:a,fixed:s})=>typeof a=="number"&&typeof s=="boolean",change:a=>typeof a=="boolean"},setup(a,{emit:s}){const t=a,u=o(),n=o(),i=o(),l=o(!1),d=o(0),p=o(0),f=o(0),C=v(()=>{if(!!l.value)return{width:`${d.value}px`,height:`${p.value}px`}}),S=v(()=>{if(!!l.value)return{width:`${d.value}px`,height:`${p.value}px`,top:`${t.top}px`,zIndex:t.zIndex,position:"fixed"}}),$=()=>{if(!u.value||!n.value)return;const e=u.value.getBoundingClientRect();if(d.value=e.width,p.value=e.height,f.value=n.value instanceof Window?document.documentElement.scrollTop:n.value.scrollTop||0,i.value){const r=i.value.getBoundingClientRect();l.value=e.top<=t.top&&r.bottom>0}else l.value=e.top<=t.top};I(l,e=>s("change",e));const B=()=>{$(),s("scroll",{scrollTop:f.value,fixed:l.value})};return R(()=>{var e,r;t.target&&(i.value=(e=document.querySelector(t.target))!=null?e:void 0),n.value=T(u.value),(r=n.value)==null||r.addEventListener("scroll",B)}),(e,r)=>(w(),b("div",{ref_key:"root",ref:u,style:h(g(C))},[c("div",{style:h(g(S))},[k(e.$slots,"default")],4)],4))}}),E={class:"h-[200vh] bg-gray-100"},H=c("div",{class:"h-52"},null,-1),N={class:"w-96 h-96 bg-gray-400 affix-container"},V=c("div",{class:"w-10 h-10 bg-red-400 mx-auto"},null,-1),q=c("div",{class:"w-10 h-10 bg-red-400 mx-auto"},null,-1),G=y({setup(a){return z("\u56FA\u9489"),(s,t)=>(w(),b("div",E,[H,c("div",N,[_(x,{target:".affix-container"},{default:m(()=>[V]),_:1},8,["target"])]),_(x,{top:10},{default:m(()=>[q]),_:1})]))}});export{G as default};
